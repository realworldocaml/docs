<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Random (cryptokit.Cryptokit.Random)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><header><nav><a href="../index.html">Up</a> â€“ package <a href="../../index.html">cryptokit</a></nav><h1>Module <code>Cryptokit.Random</code></h1></header><div class="doc"><p>The <code>Random</code> module provides random and pseudo-random number generators suitable for generating cryptographic keys, nonces, or challenges.</p></div><article id="class-type-rng"><a href="#class-type-rng" class="anchor"></a><code><span class="keyword">class type </span><a href="class-type-rng/index.html">rng</a> = <span class="keyword">object</span> ... <span class="keyword">end</span></code></article><dl><dt id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val </span>string : <a href="class-type-rng/index.html">rng</a> <span>&#8209;&gt;</span> int <span>&#8209;&gt;</span> string</code></dt><dd><p><code>random_string rng len</code> returns a string of <code>len</code> random bytes read from the generator <code>rng</code>.</p></dd></dl><dl><dt id="val-secure_rng"><a href="#val-secure_rng" class="anchor"></a><code><span class="keyword">val </span>secure_rng : <a href="class-type-rng/index.html">rng</a></code></dt><dd><p>A high-quality random number generator, using hard-to-predict system data to generate entropy. This generator either uses the OS-provided RNG, if any, or reads from <code>/dev/random</code> on systems that supports it, or interrogates the EGD daemon otherwise (see <code>http://egd.sourceforge.net/</code>). For EGD, the following paths are tried to locate the Unix socket used to communicate with EGD:</p><ul><li>the value of the environment variable <code>EGD_SOCKET</code>;</li><li><code>$HOME/.gnupg/entropy</code>;</li><li><code>/var/run/egd-pool</code>; <code>/dev/egd-pool</code>; <code>/etc/egd-pool</code>.</li></ul><p>The method <code>secure_rng#random_bytes</code> fails if no suitable RNG is available. <code>secure_rng#random_bytes</code> may block until enough entropy has been gathered. Do not use for generating large quantities of random data, otherwise you could exhaust the entropy sources of the system.</p></dd></dl><dl><dt id="val-system_rng"><a href="#val-system_rng" class="anchor"></a><code><span class="keyword">val </span>system_rng : unit <span>&#8209;&gt;</span> <a href="class-type-rng/index.html">rng</a></code></dt><dd><p><code>system_rng ()</code> returns a random number generator derived from the OS-provided RNG. It raises <code>Error No_entropy_source</code> if the OS does not provide a secure RNG. Currently, this function is supported under Win32, and always fails under Unix.</p></dd></dl><dl><dt id="val-device_rng"><a href="#val-device_rng" class="anchor"></a><code><span class="keyword">val </span>device_rng : string <span>&#8209;&gt;</span> <a href="class-type-rng/index.html">rng</a></code></dt><dd><p><code>device_rng devicename</code> returns a random number generator that reads from the special file <code>devicename</code>, e.g. <code>/dev/random</code> or <code>/dev/urandom</code>.</p></dd></dl><dl><dt id="val-egd_rng"><a href="#val-egd_rng" class="anchor"></a><code><span class="keyword">val </span>egd_rng : string <span>&#8209;&gt;</span> <a href="class-type-rng/index.html">rng</a></code></dt><dd><p><code>device_rng egd_socket</code> returns a random number generator that uses the Entropy Gathering Daemon (<code>http://egd.sourceforge.net/</code>). <code>egd_socket</code> is the path to the Unix socket that EGD uses for communication.</p></dd></dl><dl><dt id="val-hardware_rng"><a href="#val-hardware_rng" class="anchor"></a><code><span class="keyword">val </span>hardware_rng : unit <span>&#8209;&gt;</span> <a href="class-type-rng/index.html">rng</a></code></dt><dd><p>A hardware random number generator based on the <code>RDRAND</code> instruction of the x86 architecture. Available only on recent Intel and AMD x86 processors in 64-bit mode. Raises <code>Error No_entropy_source</code> if not available.</p></dd></dl><dl><dt id="val-pseudo_rng"><a href="#val-pseudo_rng" class="anchor"></a><code><span class="keyword">val </span>pseudo_rng : string <span>&#8209;&gt;</span> <a href="class-type-rng/index.html">rng</a></code></dt><dd><p><code>pseudo_rng seed</code> returns a pseudo-random number generator seeded by the string <code>seed</code>. <code>seed</code> must contain at least 16 characters, and can be arbitrarily longer than this, except that only the first 55 characters are used. Technically, the first 16 characters of <code>seed</code> are used as a key for the AES cipher in CBC mode, which encrypts the output of a lagged Fibonacci generator <code>X(i) = (X(i-24) + X(i-55)) mod 256</code> seeded with the first 55 characters of <code>seed</code>. While this generator is believed to have good statistical properties, it still does not generate ``true'' randomness: the entropy of the strings it creates cannot exceed the entropy contained in the seed. As a typical use, <code>Random.pseudo_rng (Random.string Random.secure_rng 20)</code> returns a generator that can generate arbitrarily long strings of pseudo-random data without delays, and with a total entropy of approximately 160 bits.</p></dd></dl></body></html>