<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bisect__Runtime (bisect_ppx.Bisect__Runtime)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><header><nav><a href="../index.html">Up</a> â€“ package <a href="../index.html">bisect_ppx</a></nav><h1>Module <code>Bisect__Runtime</code></h1><p>This module provides runtime support for Bisect. Instrumented programs should hence be linked with this module.</p><p>Each instrumented file creates an array of counters, one for each point in that file. It then registers the array with this runtime module. Upon program exit (using <code>at_exit</code>), this module dumps the accumulated counts from all the arrays into an output file.</p><p>The default base name for the output file is <code>bisect</code> in the current directory, but another base name can be specified using the <code>BISECT_FILE</code> environment variable. The actual file name is the first non-existing <code>&lt;base&gt;&lt;n&gt;.out</code> file where <code>base</code> is the base name and <code>n</code> a natural number value padded with zeroes to 4 digits (i.e. &quot;0001&quot;, &quot;0002&quot;, and so on).</p><p>Another environment variable can be used to customize the behaviour of Bisect: <code>BISECT_SILENT</code>. If this variable is set to <code>YES</code> or <code>ON</code> (ignoring case), then Bisect will not output any message. Otherwise, Bisect will output a message in two situations:</p><ul><li>when the output file cannot be created at program termination;</li><li>when the data cannot be written at program termination. If <code>BISECT_SILENT</code> is set to <code>ERR</code> (ignoring case), these error messages are routed to <code>stderr</code>, otherwise <code>BISECT_SILENT</code> is used to determine a filename for this output. The default value is <code>bisect.log</code>.</li></ul><p>Because instrumented modules refer to <code>Bisect</code>, one is advised to link this module as one of the first ones of the program.</p><p>Since the counts output file and log file are, by default, relative to the current working directory, an instrumented process should be careful about changing its working directory, or else <code>BISECT_FILE</code> and <code>BISECT_SILENT</code> should be specified with absolute paths.</p></header><dl><dt id="val-register_file"><a href="#val-register_file" class="anchor"></a><code><span class="keyword">val </span>register_file : string <span>&#8209;&gt;</span> point_count:int <span>&#8209;&gt;</span> point_definitions:string <span>&#8209;&gt;</span> [ `Staged of int <span>&#8209;&gt;</span> unit ]</code></dt><dd><p><code>register_file file ~point_count ~point_definitions</code> indicates that the file <code>file</code> is part of the application that has been instrumented. <code>point_definitions</code> is a serialized <code>Common.point_definition list</code> giving the locations of all points in the file. The returned callback is used to increment visitation counts.</p></dd></dl><dl><dt id="val-dump_counters_exn"><a href="#val-dump_counters_exn" class="anchor"></a><code><span class="keyword">val </span>dump_counters_exn : <a href="../../ocaml/Pervasives/index.html#type-out_channel">Pervasives.out_channel</a> <span>&#8209;&gt;</span> unit</code></dt><dd><p><code>dump_counters_exn channel</code> dumps the runtime coverage counters to the specified <code>channel</code>.</p><p>An exception is raised if writing is not successful</p></dd></dl><dl><dt id="val-reset_counters"><a href="#val-reset_counters" class="anchor"></a><code><span class="keyword">val </span>reset_counters : unit <span>&#8209;&gt;</span> unit</code></dt><dd><p><code>reset_counters ()</code> will reset the runtime coverage counters.</p></dd></dl></body></html>