<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Semantics_of_primitives (ocaml.Semantics_of_primitives)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><header><nav><a href="../index.html">Up</a> â€“ package <a href="../index.html">ocaml</a></nav><h1>Module <code>Semantics_of_primitives</code></h1><p>Description of the semantics of primitives, to be used for optimization purposes.</p><p>&quot;No effects&quot; means that the primitive does not change the observable state of the world. For example, it must not write to any mutable storage, call arbitrary external functions or change control flow (e.g. by raising an exception). Note that allocation is not &quot;No effects&quot; (see below).</p><p>It is assumed in the compiler that applications of primitives with no effects, whose results are not used, may be eliminated. It is further assumed that applications of primitives with no effects may be duplicated (and thus possibly executed more than once).</p><p>(Exceptions arising from allocation points, for example &quot;out of memory&quot; or exceptions propagated from finalizers or signal handlers, are treated as &quot;effects out of the ether&quot; and thus ignored for our determination here of effectfulness. The same goes for floating point operations that may cause hardware traps on some platforms.)</p><p>&quot;Only generative effects&quot; means that a primitive does not change the observable state of the world save for possibly affecting the state of the garbage collector by performing an allocation. Applications of primitives that only have generative effects and whose results are unused may be eliminated by the compiler. However, unlike &quot;No effects&quot; primitives, such applications will never be eligible for duplication.</p><p>&quot;Arbitrary effects&quot; covers all other primitives.</p><p>&quot;No coeffects&quot; means that the primitive does not observe the effects (in the sense described above) of other expressions. For example, it must not read from any mutable storage or call arbitrary external functions.</p><p>It is assumed in the compiler that, subject to data dependencies, expressions with neither effects nor coeffects may be reordered with respect to other expressions.</p></header><dl><dt id="type-effects"><a href="#type-effects" class="anchor"></a><code><span class="keyword">type </span>effects</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-effects.No_effects" class="anchored"><td class="def constructor"><a href="#type-effects.No_effects" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">No_effects</span></code></td></tr><tr id="type-effects.Only_generative_effects" class="anchored"><td class="def constructor"><a href="#type-effects.Only_generative_effects" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Only_generative_effects</span></code></td></tr><tr id="type-effects.Arbitrary_effects" class="anchored"><td class="def constructor"><a href="#type-effects.Arbitrary_effects" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Arbitrary_effects</span></code></td></tr></table><code></code></dt><dt id="type-coeffects"><a href="#type-coeffects" class="anchor"></a><code><span class="keyword">type </span>coeffects</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-coeffects.No_coeffects" class="anchored"><td class="def constructor"><a href="#type-coeffects.No_coeffects" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">No_coeffects</span></code></td></tr><tr id="type-coeffects.Has_coeffects" class="anchored"><td class="def constructor"><a href="#type-coeffects.Has_coeffects" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Has_coeffects</span></code></td></tr></table><code></code></dt></dl><dl><dt id="val-for_primitive"><a href="#val-for_primitive" class="anchor"></a><code><span class="keyword">val </span>for_primitive : <a href="../Lambda/index.html#type-primitive">Lambda.primitive</a> <span>&#8209;&gt;</span> <a href="index.html#type-effects">effects</a><span class="keyword"> * </span><a href="index.html#type-coeffects">coeffects</a></code></dt><dd><p>Describe the semantics of a primitive. This does not take into account of the (non-)(co)effectfulness of the arguments in a primitive application. To determine whether such an application is (co)effectful, the arguments must also be analysed.</p></dd></dl><dl><dt id="type-return_type"><a href="#type-return_type" class="anchor"></a><code><span class="keyword">type </span>return_type</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-return_type.Float" class="anchored"><td class="def constructor"><a href="#type-return_type.Float" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Float</span></code></td></tr><tr id="type-return_type.Other" class="anchored"><td class="def constructor"><a href="#type-return_type.Other" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Other</span></code></td></tr></table><code></code></dt></dl><dl><dt id="val-return_type_of_primitive"><a href="#val-return_type_of_primitive" class="anchor"></a><code><span class="keyword">val </span>return_type_of_primitive : <a href="../Lambda/index.html#type-primitive">Lambda.primitive</a> <span>&#8209;&gt;</span> <a href="index.html#type-return_type">return_type</a></code></dt></dl></body></html>